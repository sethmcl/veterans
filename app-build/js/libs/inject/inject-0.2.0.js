(function(){var JSON,Persist,Porthole,callbackRegistry,checkComplete,clearFileRegistry,commonJSFooter,commonJSHeader,config,context,counter,createIframe,createTxId,fileExpiration,fileOnComplete,fileRegistry,fileStorage,fileStorageToken,fileStore,getFile,getModule,getPointcuts,getXHR,hostPrefixRegex,hostSuffixRegex,iframeName,isCached,isExpired,jsSuffix,loadModules,loadQueue,modulePathRegistry,moduleRegistry,namespace,normalizePath,onModuleLoad,pauseRequired,require,requireRegex,responseSlicer,saveFile,saveModule,schemaVersion,sendToIframe,sendToXhr,setConfig,setUserModules,txnRegistry,userModules,xDomainRpc,__slice=Array.prototype.slice;schemaVersion=1,context=this,pauseRequired=!1,fileRegistry=null,fileStorage=null,xDomainRpc=null,fileStorageToken="FILEDB",fileStore="Inject FileStorage",namespace="Inject",fileExpiration=86400,counter=0,loadQueue=[],userModules={},moduleRegistry={},modulePathRegistry={},callbackRegistry={},txnRegistry={},fileOnComplete={},config={fileExpiration:fileExpiration},jsSuffix=/.*?\.js$/,hostPrefixRegex=/^https?:\/\//,hostSuffixRegex=/^(.*?)(\/.*|$)/,iframeName="injectProxy",requireRegex=/.*?require[\s]*\([\s]*("|')([\w\\/\.\:]+?)('|")[\s]*\).*?/gm,responseSlicer=/^(.+?)[\s](.+?)[\s](.+?)[\s]([\w\W]+)$/m,commonJSHeader='with (window) {\n  (function() {\n    var module = {}, exports = {}, require = __INJECT_NS__.require, exe = null;\n    module.id = "__MODULE_ID__";\n    module.uri = "__MODULE_URI__";\n    module.exports = exports;\n    exe = function(module, exports, require) {\n      __POINTCUT_BEFORE__',commonJSFooter="    __POINTCUT_AFTER__\n  };\n  exe.call(module, module, exports, require);\n  return module.exports;\n})();\n}",setConfig=function(a){config=a;if(config.fileExpiration==null)return config.fileExpiration=fileExpiration},setUserModules=function(a){return userModules=a},getModule=function(a){return moduleRegistry[a]||!1},saveModule=function(a,b){if(moduleRegistry[a])return;return moduleRegistry[a]=b},isExpired=function(a){var b;return((b=fileRegistry[a])!=null?b.expires:void 0)>(new Date).getTime()?!1:(fileRegistry[a]!=null&&(fileRegistry[a]={}),!0)},isCached=function(a){return fileRegistry!=null&&fileRegistry[a]!=null&&fileRegistry[a].content&&!isExpired(a)},getFile=function(a,b){var c;return c=""+fileStorageToken+schemaVersion,fileStorage||(fileStorage=new Persist.Store(fileStore)),fileRegistry?isCached(a)?b(!0,fileRegistry[a].content):b(!1,null):fileStorage.get(c,function(c,d){return c&&typeof d=="string"&&d.length?(fileRegistry=JSON.parse(d),isCached(a)?b(!0,fileRegistry[a].content):b(!1,null)):(fileRegistry={},b(!1,null))})},saveFile=function(a,b){var c;c=""+fileStorageToken+schemaVersion,fileStorage||(fileStorage=new Persist.Store(fileStore));if(isCached(a))return;return fileRegistry[a]={content:b,expires:config.fileExpiration*1e3+(new Date).getTime()},fileStorage.set(c,JSON.stringify(fileRegistry))},clearFileRegistry=function(a){var b;a==null&&(a=schemaVersion),b=""+fileStorageToken+a,fileStorage||(fileStorage=new Persist.Store(fileStore)),fileStorage.set(b,"");if(a===schemaVersion)return fileRegistry={}},createTxId=function(){return"txn_"+counter++},createIframe=function(){var a,b,c,d,e,f;c=config!=null?(e=config.xd)!=null?e.xhr:void 0:void 0,b=config!=null?(f=config.xd)!=null?f.inject:void 0:void 0;if(!c)throw new Error("Configuration requires xd.remote to be defined");if(!b)throw new Error("Configuration requires xd.local to be defined");d=function(a){return a=a.replace(hostPrefixRegex,"").replace(hostSuffixRegex,"$1"),a};try{a=document.createElement('<iframe name="'+iframeName+'"/>')}catch(g){a=document.createElement("iframe")}return a.name=iframeName,a.src=c+"#xhr",a.style.width=a.style.height="1px",a.style.right=a.style.bottom="0px",a.style.position="absolute",a.id=iframeName,document.body.insertBefore(a,document.body.firstChild),xDomainRpc=new Porthole.WindowProxy(config.xd.xhr+"#xhr",iframeName),xDomainRpc.addEventListener(function(a){var b,c,e,f;if(d(a.origin)!==d(config.xd.xhr))return;if(a.data==="READY"){xDomainRpc.postMessage("READYREADY"),pauseRequired=!1;for(e=0,f=loadQueue.length;e<f;e++)b=loadQueue[e],b();return}return c=a.data.match(responseSlicer),onModuleLoad(c[1],c[2],c[3],c[4])})},getPointcuts=function(a){var b,c,d,e,f;e=function(){},f={before:e,after:e};if(!userModules[a])return f;c=userModules[a];for(b in f)d=f[b],c[b]&&(f[b]=c[b]);return f},normalizePath=function(a){var b,c,d,e,f;c=a,f=a,b=config.path||"";if(modulePathRegistry[a])return modulePathRegistry[a];userModules[a]&&(d=userModules[a],typeof d=="string"&&(f=d),typeof d=="object"&&d.path&&(typeof d.path=="function"&&(e=d.path(f),e!==!1&&(f=e)),typeof d.path=="string"&&(f=d.path))),typeof b=="function"&&(e=b(f),e!==!1&&(f=e));if(f.indexOf("http")===0||f.indexOf("https")===0)return modulePathRegistry[c]=f,modulePathRegistry[c];if(f.indexOf("/")!==0&&typeof b=="undefined")throw new Error("Path must be defined");return f.indexOf("/")!==0&&typeof b=="string"&&(f=""+config.path+f),jsSuffix.test(f)||(f=""+f+".js"),modulePathRegistry[c]=f,modulePathRegistry[c]},loadModules=function(a,b){var c,d,e,f,g,h,i;f=createTxId(),e={};for(g=0,h=a.length;g<h;g++)c=a[g],e[c]=normalizePath(c);txnRegistry[f]=a,callbackRegistry[f]=b,i=[];for(c in e)d=e[c],fileOnComplete[d]||(fileOnComplete[d]={txns:[],loading:!1}),getModule(c)&&(e[c]=getModule(c)),i.push(getFile(d,function(a,b){fileOnComplete[d].txns.push(f);if(a&&typeof b=="string"&&b.length)return onModuleLoad(f,c,d,b);if(!fileOnComplete[d].loading)return fileOnComplete[d].loading=!0,config.xd!=null?sendToIframe(f,c,d,onModuleLoad):sendToXhr(f,c,d,onModuleLoad)}));return i},onModuleLoad=function(a,b,c,d){var e,f,g,h,i,j,k,l,m;f=getPointcuts(b),g={};for(e in f)h=f[e],g[e]=h.toString().match(/.*?\{([\w\W]*)\}/m)[1];return j=commonJSHeader.replace(/__MODULE_ID__/g,b).replace(/__MODULE_URI__/g,c).replace(/__INJECT_NS__/g,namespace).replace(/__POINTCUT_BEFORE__/g,g.before),i=commonJSFooter.replace(/__POINTCUT_AFTER__/g,g.after),l=""+j+"\n"+d+"\n"+i,k=[],d.replace(requireRegex,function(){var a;return a=1>arguments.length?[]:__slice.call(arguments,0),k.push(a[2])}),m=function(){var a,e,f,g,h,i;try{a=context.eval(l)}catch(j){throw j}saveModule(b,a),saveFile(c,d),fileOnComplete[c].loading=!1,h=fileOnComplete[c].txns,i=[];for(f=0,g=h.length;f<g;f++)e=h[f],i.push(checkComplete(e));return i},k.length>0?loadModules(k,function(){return m()}):m()},checkComplete=function(a){var b,c,d,e,f,g,h,i;c=!0,b=callbackRegistry[a],f=[],i=txnRegistry[a];for(g=0,h=i.length;g<h;g++){e=i[g],d=getModule(e),d===!1?c=!1:f.push(d);if(!c)break}if(c)return b.call(context,f)},sendToXhr=function(a,b,c,d){var e;return e=getXHR(),e.open("GET",c),e.onreadystatechange=function(){if(e.readyState===4&&e.status===200)return d.call(context,a,b,c,e.responseText)},e.send(null)},sendToIframe=function(a,b,c,d){return xDomainRpc.postMessage(""+a+" "+b+" "+c)},getXHR=function(){var a;a=!1;if(typeof XMLHttpRequest!="undefined")try{a=new XMLHttpRequest}catch(b){a=!1}if(!a&&typeof window.createRequest!="undefined")try{a=new window.createRequest}catch(c){a=!1}if(!a)try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(d){try{a=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){a=!1}}if(!a)throw new Error("Could not create an xmlHttpRequest Object");return a},require=function(a){var b;b=getModule(a);if(b===!1)throw new Error(""+a+" not loaded");return b},require.ensure=function(a,b){var c;return config.xd!=null&&!xDomainRpc&&!pauseRequired&&(createIframe(),pauseRequired=!0),c=function(){return loadModules(a,function(){var a,c;return c={},a={},c.exports=a,b.call(context,require,c,a)})},pauseRequired?loadQueue.push(c):c()},require.setModuleRoot=function(a){return typeof a=="string"&&a.lastIndexOf("/")!==a.length&&(a=""+a+"/"),config.path=a},require.setExpires=function(a){return config.fileExpiration=a},require.setCrossDomain=function(a,b){return config.xd={},config.xd.inject=a,config.xd.xhr=b},require.clearCache=function(a){return clearFileRegistry(a)},require.manifest=function(a){return setUserModules(a)},require.run=function(a){var b;return b="bar"},context.require=require,context.Inject={require:require},Porthole=null,Porthole=typeof Porthole=="undefined"||!Porthole?{}:Porthole,Porthole={trace:function(a){try{"Porthole: "+a}catch(b){}},error:function(a){try{console.error("Porthole: "+a)}catch(b){}}},Porthole.WindowProxy=function(){},Porthole.WindowProxy.prototype={postMessage:function(){},addEventListener:function(a){},removeEventListener:function(a){}},Porthole.WindowProxyLegacy=function(a,b){b===undefined&&(b=""),this.targetWindowName=b,this.eventListeners=[],this.origin=window.location.protocol+"//"+window.location.host,a!==null?(this.proxyIFrameName=this.targetWindowName+"ProxyIFrame",this.proxyIFrameLocation=a,this.proxyIFrameElement=this.createIFrameProxy()):this.proxyIFrameElement=null},Porthole.WindowProxyLegacy.prototype={getTargetWindowName:function(){return this.targetWindowName},getOrigin:function(){return this.origin},createIFrameProxy:function(){var a=document.createElement("iframe");return a.setAttribute("id",this.proxyIFrameName),a.setAttribute("name",this.proxyIFrameName),a.setAttribute("src",this.proxyIFrameLocation),a.setAttribute("frameBorder","1"),a.setAttribute("scrolling","auto"),a.setAttribute("width",30),a.setAttribute("height",30),a.setAttribute("style","position: absolute; left: -100px; top:0px;"),a.style.setAttribute&&a.style.setAttribute("cssText","position: absolute; left: -100px; top:0px;"),document.body.appendChild(a),a},postMessage:function(a,b){b===undefined&&(b="*"),this.proxyIFrameElement===null?Porthole.error("Can't send message because no proxy url was passed in the constructor"):(sourceWindowName=window.name,this.proxyIFrameElement.setAttribute("src",this.proxyIFrameLocation+"#"+a+"&sourceOrigin="+escape(this.getOrigin())+"&targetOrigin="+escape(b)+"&sourceWindowName="+sourceWindowName+"&targetWindowName="+this.targetWindowName),this.proxyIFrameElement.height=this.proxyIFrameElement.height>50?50:100)},addEventListener:function(a){return this.eventListeners.push(a),a},removeEventListener:function(a){try{var b=this.eventListeners.indexOf(a);this.eventListeners.splice(b,1)}catch(c){this.eventListeners=[],Porthole.error(c)}},dispatchEvent:function(a){for(var b=0;b<this.eventListeners.length;b++)try{this.eventListeners[b](a)}catch(c){Porthole.error("Exception trying to call back listener: "+c)}}},Porthole.WindowProxyHTML5=function(a,b){b===undefined&&(b=""),this.targetWindowName=b},Porthole.WindowProxyHTML5.prototype={postMessage:function(a,b){b===undefined&&(b="*"),this.targetWindowName===""?targetWindow=top:targetWindow=parent.frames[this.targetWindowName],targetWindow.postMessage(a,b)},addEventListener:function(a){return window.addEventListener("message",a,!1),a},removeEventListener:function(a){window.removeEventListener("message",a,!1)},dispatchEvent:function(a){var b=document.createEvent("MessageEvent");b.initMessageEvent("message",!0,!0,a.data,a.origin,1,window,null),window.dispatchEvent(b)}},typeof window.postMessage!="function"?(Porthole.trace("Using legacy browser support"),Porthole.WindowProxy=Porthole.WindowProxyLegacy,Porthole.WindowProxy.prototype=Porthole.WindowProxyLegacy.prototype):(Porthole.trace("Using built-in browser support"),Porthole.WindowProxy=Porthole.WindowProxyHTML5,Porthole.WindowProxy.prototype=Porthole.WindowProxyHTML5.prototype),Porthole.WindowProxy.splitMessageParameters=function(a){if(typeof a=="undefined"||a===null)return null;var b=[],c=a.split(/&/);for(var d in c){var e=c[d].split("=");typeof e[1]=="undefined"?b[e[0]]="":b[e[0]]=e[1]}return b},Porthole.MessageEvent=function(a,b,c){this.data=a,this.origin=b,this.source=c},Porthole.WindowProxyDispatcher={forwardMessageEvent:function(a){var b=document.location.hash;if(b.length>0){b=b.substr(1),m=Porthole.WindowProxyDispatcher.parseMessage(b),m.targetWindowName===""?targetWindow=top:targetWindow=parent.frames[m.targetWindowName];var c=Porthole.WindowProxyDispatcher.findWindowProxyObjectInWindow(targetWindow,m.sourceWindowName);c?c.origin==m.targetOrigin||m.targetOrigin=="*"?(a=new Porthole.MessageEvent(m.data,m.sourceOrigin,c),c.dispatchEvent(a)):Porthole.error("Target origin "+c.origin+" does not match desired target of "+m.targetOrigin):Porthole.error("Could not find window proxy object on the target window")}},parseMessage:function(a){if(typeof a=="undefined"||a===null)return null;params=Porthole.WindowProxy.splitMessageParameters(a);var b={targetOrigin:"",sourceOrigin:"",sourceWindowName:"",data:""};b.targetOrigin=unescape(params.targetOrigin),b.sourceOrigin=unescape(params.sourceOrigin),b.sourceWindowName=unescape(params.sourceWindowName),b.targetWindowName=unescape(params.targetWindowName);var c=a.split(/&/);return c.length>3&&(c.pop(),c.pop(),c.pop(),c.pop(),b.data=c.join("&")),b},findWindowProxyObjectInWindow:function(a,b){a.RuntimeObject&&(a=a.RuntimeObject());if(a)for(var c in a)try{if(a[c]!==null&&typeof a[c]=="object"&&a[c]instanceof a.Porthole.WindowProxy&&a[c].getTargetWindowName()==b)return a[c]}catch(d){}return null},start:function(){window.addEventListener?window.addEventListener("resize",Porthole.WindowProxyDispatcher.forwardMessageEvent,!1):document.body.attachEvent?window.attachEvent("onresize",Porthole.WindowProxyDispatcher.forwardMessageEvent):Porthole.error("Can't attach resize event")}},JSON=context.JSON||null,JSON||(JSON={}),function(){function k(a){return a<10?"0"+a:a}function o(a){return p.lastIndex=0,p.test(a)?'"'+a.replace(p,function(a){var b=r[a];return typeof b=="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function l(a,b){var c,d,f,g,h=e,j,k=b[a];k&&typeof k=="object"&&typeof k.toJSON=="function"&&(k=k.toJSON(a)),typeof i=="function"&&(k=i.call(b,a,k));switch(typeof k){case"string":return o(k);case"number":return isFinite(k)?String(k):"null";case"boolean":case"null":return String(k);case"object":if(!k)return"null";e+=n,j=[];if(Object.prototype.toString.apply(k)==="[object Array]"){g=k.length;for(c=0;c<g;c+=1)j[c]=l(c,k)||"null";return f=j.length===0?"[]":e?"[\n"+e+j.join(",\n"+e)+"\n"+h+"]":"["+j.join(",")+"]",e=h,f}if(i&&typeof i=="object"){g=i.length;for(c=0;c<g;c+=1)typeof i[c]=="string"&&(d=i[c],(f=l(d,k))&&j.push(o(d)+(e?": ":":")+f))}else for(d in k)Object.prototype.hasOwnProperty.call(k,d)&&(f=l(d,k))&&j.push(o(d)+(e?": ":":")+f);return f=j.length===0?"{}":e?"{\n"+e+j.join(",\n"+e)+"\n"+h+"}":"{"+j.join(",")+"}",e=h,f}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+k(this.getUTCMonth()+1)+"-"+k(this.getUTCDate())+"T"+k(this.getUTCHours())+":"+k(this.getUTCMinutes())+":"+k(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var q=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,p=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,n,r={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},i;typeof JSON.stringify!="function"&&(JSON.stringify=function(a,b,c){var d;n=e="";if(typeof c=="number")for(d=0;d<c;d+=1)n+=" ";else typeof c=="string"&&(n=c);if(!(i=b)||typeof b=="function"||typeof b=="object"&&typeof b.length=="number")return l("",{"":a});throw Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(a,e){function c(a,b){var d,f,g=a[b];if(g&&typeof g=="object")for(d in g)Object.prototype.hasOwnProperty.call(g,d)&&(f=c(g,d),f!==void 0?g[d]=f:delete g[d]);return e.call(a,b,g)}var d,a=String(a);q.lastIndex=0,q.test(a)&&(a=a.replace(q,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return d=eval("("+a+")"),typeof e=="function"?c({"":d},""):d;throw new SyntaxError("JSON.parse")})}(),Persist=null,Persist=function(){var a,b,c,d,e,f;return f=function(){var a=["expires","path","domain"],b=escape,c=unescape,d=document,e,f=function(c,d){var e,f,g,h=[],i=arguments.length>2?arguments[2]:{};h.push(b(c)+"="+b(d));for(e=0;e<a.length;e++)f=a[e],(g=i[f])&&h.push(f+"="+g);return i.secure&&h.push("secure"),h.join("; ")};return e={set:function(a,b){var c=arguments.length>2?arguments[2]:{},e=new Date;e.setTime(e.getTime());var h={};c.expires&&(c.expires*=864e5,h.expires=new Date(e.getTime()+c.expires),h.expires=h.expires.toGMTString()),e=["path","domain","secure"];for(i=0;i<e.length;i++)c[e[i]]&&(h[e[i]]=c[e[i]]);return c=f(a,b,h),d.cookie=c,b},has:function(a){var a=b(a),c=d.cookie,e=c.indexOf(a+"="),c=c.substring(0,a.length);return!e&&a!=c||e<0?!1:!0},get:function(a){var a=b(a),e=d.cookie,f=e.indexOf(a+"="),g=f+a.length+1,h=e.substring(0,a.length);return!f&&a!=h||f<0?null:(a=e.indexOf(";",g),a<0&&(a=e.length),c(e.substring(g,a)))},remove:function(a){var b=e.get(a);return d.cookie=f(a,"",{expires:"Thu, 01-Jan-1970 00:00:01 GMT"}),b},keys:function(){var a=d.cookie.split("; "),b,e,f=[];for(b=0;b<a.length;b++)e=a[b].split("="),f.push(c(e[0]));return f},all:function(){var a=d.cookie.split("; "),b,e,f=[];for(b=0;b<a.length;b++)e=a[b].split("="),f.push([c(e[0]),c(e[1])]);return f},version:"0.2.1",enabled:!1},e.enabled=function(){var a=new Date,a=a.toGMTString();return this.set("__EC_TEST__",a),this.enabled=this.remove("__EC_TEST__")==a}.call(e),e}(),e=function(){},c=function(a){return"PS"+a.replace(/_/g,"__").replace(/ /g,"_s")},C={search_order:"gears,localstorage,whatwg_db,globalstorage,flash,ie,cookie".split(","),name_re:/^[a-z][a-z0-9_ -]+$/i,methods:"init,get,set,remove,load,save".split(","),sql:{version:"1",create:"CREATE TABLE IF NOT EXISTS persist_data (k TEXT UNIQUE NOT NULL PRIMARY KEY, v TEXT NOT NULL)",get:"SELECT v FROM persist_data WHERE k = ?",set:"INSERT INTO persist_data(k, v) VALUES (?, ?)",remove:"DELETE FROM persist_data WHERE k = ?"},flash:{div_id:"_persist_flash_wrap",id:"_persist_flash",path:"persist.swf",size:{w:1,h:1},args:{autostart:!0}}},b={gears:{size:-1,test:function(){return window.google&&window.google.gears?!0:!1},methods:{transaction:function(a){var b=this.db;b.execute("BEGIN").close(),a.call(this,b),b.execute("COMMIT").close()},init:function(){var a;a=this.db=google.gears.factory.create("beta.database"),a.open(c(this.name)),a.execute(C.sql.create).close()},get:function(a,b,c){var d,e=C.sql.get;b&&this.transaction(function(f){d=f.execute(e,[a]),d.isValidRow()?b.call(c||this,!0,d.field(0)):b.call(c||this,!1,null),d.close()})},set:function(a,b,c,d){var e=C.sql.remove,f=C.sql.set;this.transaction(function(g){g.execute(e,[a]).close(),g.execute(f,[a,b]).close(),c&&c.call(d||this,!0,b)})},remove:function(a,b,c){var d=C.sql.get;sql=C.sql.remove,this.transaction(function(e){b?(r=e.execute(d,[a]),r.isValidRow()?(val=r.field(0),e.execute(sql,[a]).close(),b.call(c||this,!0,val)):b.call(c||this,!1,null),r.close()):e.execute(sql,[a]).close()})}}},whatwg_db:{size:204800,test:function(){return window.openDatabase?window.openDatabase("PersistJS Test",C.sql.version,"Persistent database test.",b.whatwg_db.size)?!0:!1:!1},methods:{transaction:function(a){if(!this.db_created){var b=C.sql.create;this.db.transaction(function(a){a.executeSql(b,[],function(){this.db_created=!0})},e)}this.db.transaction(a)},init:function(){this.db=openDatabase(this.name,C.sql.version,this.o.about||"Persistent storage for "+this.name,this.o.size||b.whatwg_db.size)},get:function(a,b,c){var d=C.sql.get;b&&(c=c||this,this.transaction(function(e){e.executeSql(d,[a],function(a,d){d.rows.length>0?b.call(c,!0,d.rows.item(0).v):b.call(c,!1,null)})}))},set:function(a,b,c,d){var e=C.sql.remove,f=C.sql.set;return this.transaction(function(g){g.executeSql(e,[a],function(){g.executeSql(f,[a,b],function(){c&&c.call(d||this,!0,b)})})}),b},remove:function(a,b,c){var d=C.sql.get;sql=C.sql.remove,this.transaction(function(e){b?e.executeSql(d,[a],function(d,e){if(e.rows.length>0){var f=e.rows.item(0).v;d.executeSql(sql,[a],function(){b.call(c||this,!0,f)})}else b.call(c||this,!1,null)}):e.executeSql(sql,[a])})}}},globalstorage:{size:5242880,test:function(){return window.globalStorage?!0:!1},methods:{key:function(a){return c(this.name)+c(a)},init:function(){this.store=globalStorage[this.o.domain]},get:function(a,b,c){a=this.key(a),b&&b.call(c||this,!0,this.store.getItem(a))},set:function(a,b,c,d){a=this.key(a),this.store.setItem(a,b),c&&c.call(d||this,!0,b)},remove:function(a,b,c){var d,a=this.key(a);d=this.store[a],this.store.removeItem(a),b&&b.call(c||this,d!==null,d)}}},localstorage:{size:-1,test:function(){return window.localStorage?!0:!1},methods:{key:function(a){return c(this.name)+c(a)},init:function(){this.store=localStorage},get:function(a,b,c){a=this.key(a),b&&b.call(c||this,!0,this.store.getItem(a))},set:function(a,b,c,d){a=this.key(a),this.store.setItem(a,b),c&&c.call(d||this,!0,b)},remove:function(a,b,c){var d,a=this.key(a);d=this.getItem(a),this.store.removeItem(a),b&&b.call(c||this,d!==null,d)}}},ie:{prefix:"_persist_data-",size:65536,test:function(){return window.ActiveXObject?!0:!1},make_userdata:function(a){var b=document.createElement("div");return b.id=a,b.style.display="none",b.addBehavior("#default#userData"),document.body.appendChild(b),b},methods:{init:function(){var a=b.ie.prefix+c(this.name);this.el=b.ie.make_userdata(a),this.o.defer&&this.load()},get:function(a,b,d){a=c(a),this.o.defer||this.load(),a=this.el.getAttribute(a),b&&b.call(d||this,a?!0:!1,a)},set:function(a,b,d,e){a=c(a),this.el.setAttribute(a,b),this.o.defer||this.save(),d&&d.call(e||this,!0,b)},load:function(){this.el.load(c(this.name))},save:function(){this.el.save(c(this.name))}}},cookie:{delim:":",size:4e3,test:function(){return a.Cookie.enabled?!0:!1},methods:{key:function(a){return this.name+b.cookie.delim+a},get:function(a,b,c,d){a=this.key(a),b=f.get(a),c&&c.call(d||this,b!=null,b)},set:function(a,b,c,d){a=this.key(a),f.set(a,b,this.o),c&&c.call(d||this,!0,b)},remove:function(a,b,c,d){a=this.key(a),b=f.remove(a),c&&c.call(d||this,b!=null,b)}}},flash:{test:function(){return!window.SWFObject||!deconcept||!deconcept.SWFObjectUtil?!1:deconcept.SWFObjectUtil.getPlayerVersion().major<8?!1:!0},methods:{init:function(){if(!b.flash.el){var a,c,d,e=C.flash;d=document.createElement("div"),d.id=e.div_id,document.body.appendChild(d),a=new SWFObject(this.o.swf_path||e.path,e.id,e.size.w,e.size.h,"8");for(c in e.args)a.addVariable(c,e.args[c]);a.write(d),b.flash.el=document.getElementById(e.id)}this.el=b.flash.el},get:function(a,b,d){a=c(a),a=this.el.get(this.name,a),b&&b.call(d||this,a!==null,a)},set:function(a,b,d,e){a=c(a),this.el.set(this.name,a,b),d&&d.call(e||this,!0,b)},remove:function(a,b,d){a=c(a),a=this.el.remove(this.name,a),b&&b.call(d||this,!0,a)}}}},d=function(){var c,d,f,g;f=C.methods;var i=C.search_order;for(c=0,d=f.length;c<d;c++)a.Store.prototype[f[c]]=e;a.type=null,a.size=-1;for(c=0,d=i.length;!a.type&&c<d;c++)if(f=b[i[c]],f.test())for(g in a.type=i[c],a.size=f.size,f.methods)a.Store.prototype[g]=f.methods[g];a._init=!0},a={VERSION:"0.1.0",type:null,size:0,add:function(a){b[a.id]=a,C.search_order=[a.id].concat(C.search_order),d()},remove:function(a){var c=C.search_order.indexOf(a);c<0||(C.search_order.splice(c,1),delete b[a],d())},Cookie:f,Store:function(b,c){if(!C.name_re.exec(b))throw Error("Invalid name");if(!a.type)throw Error("No suitable storage found");c=c||{},this.name=b,c.domain=c.domain||location.hostname||"localhost.localdomain",this.o=c,c.expires=c.expires||730,c.path=c.path||"/",this.init()}},d(),a}()}).call(this)