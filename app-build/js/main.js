(function(){var a=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],b=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,c=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,d=typeof location!="undefined"&&location.href,e=d&&location.protocol&&location.protocol.replace(/\:/,""),f=d&&location.hostname,g=d&&(location.port||void 0),h=[];define("text",[],function(){var l,m,s;return typeof window!="undefined"&&window.navigator&&window.document?m=function(a,b){var c=l.createXhr();c.open("GET",a,!0),c.onreadystatechange=function(){c.readyState===4&&b(c.responseText)},c.send(null)}:typeof process!="undefined"&&process.versions&&process.versions.node?(s=require.nodeRequire("fs"),m=function(a,b){b(s.readFileSync(a,"utf8"))}):typeof Packages!="undefined"&&(m=function(a,b){var c=new java.io.File(a),d=java.lang.System.getProperty("line.separator"),c=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(c),"utf-8")),e,f,g="";try{e=new java.lang.StringBuffer,(f=c.readLine())&&f.length()&&f.charAt(0)===65279&&(f=f.substring(1));for(e.append(f);(f=c.readLine())!==null;)e.append(d),e.append(f);g=String(e.toString())}finally{c.close()}b(g)}),l={version:"1.0.0",strip:function(a){if(a){var a=a.replace(b,""),d=a.match(c);d&&(a=d[1])}else a="";return a},jsEscape:function(a){return a.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")},createXhr:function(){var b,c,d;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;for(c=0;c<3;c++){d=a[c];try{b=new ActiveXObject(d)}catch(e){}if(b){a=[d];break}}if(!b)throw Error("createXhr(): XMLHttpRequest not available");return b},get:m,parseName:function(a){var b=!1,c=a.indexOf("."),d=a.substring(0,c),a=a.substring(c+1,a.length),c=a.indexOf("!");return c!==-1&&(b=a.substring(c+1,a.length),b=b==="strip",a=a.substring(0,c)),{moduleName:d,ext:a,strip:b}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(a,b,c,d){var e=l.xdRegExp.exec(a),f;return e?(a=e[2],e=e[3],e=e.split(":"),f=e[1],e=e[0],(!a||a===b)&&(!e||e===c)&&(!f&&!e||f===d)):!0},finishLoad:function(a,b,c,d,e){c=b?l.strip(c):c,e.isBuild&&e.inlineText&&(h[a]=c),d(c)},load:function(a,b,c,h){var j=l.parseName(a),k=j.moduleName+"."+j.ext,m=b.toUrl(k),n=h&&h.text&&h.text.useXhr||l.useXhr;!d||n(m,e,f,g)?l.get(m,function(b){l.finishLoad(a,j.strip,b,c,h)}):b([k],function(a){l.finishLoad(j.moduleName+"."+j.ext,j.strip,a,c,h)})},write:function(a,b,c){if(b in h){var d=l.jsEscape(h[b]);c.asModule(a+"!"+b,"define(function () { return '"+d+"';});\n")}},writeFile:function(a,b,c,d,e){var b=l.parseName(b),f=b.moduleName+"."+b.ext,g=c.toUrl(b.moduleName+"."+b.ext)+".js";l.load(f,c,function(){var b=function(a){return d(g,a)};b.asModule=function(a,b){return d.asModule(a,g,b)},l.write(a,f,b,e)},e)}}})})(),define("text!templates/SignInView.dust",[],function(){return'<script type="IN/Login" data-size="large"></script>'}),define("views/SignInView",["require","text!templates/SignInView.dust"],function(a){var b="SignInView",c=a("text!templates/SignInView.dust");return dust.loadSource(dust.compile(c,b)),Backbone.View.extend({el:$("#sign-in-view"),events:{},initialize:function(){_.bindAll(this,"render","unrender")},render:function(){var a=$(this.el);dust.render(b,{},function(b,c){a.html(c),IN.parse(a[0])})},unrender:function(){$(this.el).remove()}})}),define("text!templates/HeadView.dust",[],function(){return'<h1 class="header">VETERANS</h1>\n<h2 class="header"><span class="user-name">{userData.firstName}</span>, where are your fellow veterans now?</h2>'}),define("text!templates/StatusView.dust",[],function(){return"{#searchInProgress}\n  <div class='status-bar'>\n    searching...\n  </div>\n{:else}\n  <div class='status-bar'>\n    {#peopleSearchResults}    \n      {countText} veterans found\n    {:else}\n      try searching!\n    {/peopleSearchResults}\n  </div>\n{/searchInProgress}\n"}),define("text!templates/FacetListView.dust",[],function(){return'<ul class="facets"></ul>'}),define("text!templates/FacetView.dust",[],function(){return'<span class="name"></span>\n<ul class="facet"></ul>'}),define("text!templates/BucketView.dust",[],function(){return'<a href="#">\n  <span class="graph"></span>\n  <span class="label"></span>\n  <span class="count"></span>  \n</a>\n'}),define("text!templates/PeopleListView.dust",[],function(){return"<ul class='people'></ul>\n<button id=\"show-more\">show more</button>"}),define("text!templates/PeopleCardView.dust",[],function(){return'{!\n  Available data:\n    INT   person.distance\n    STR   person.firstName\n    STR   person.headline\n    STR   person.id\n    STR   person.industry\n    STR   person.lastName    \n    STR   person.pictureUrl\n    STR   person.publicProfileUrl\n\n    OBJ   person.location\n    STR   person.location.name\n    OBJ   person.location.country\n    STR   person.location.country.code    \n    \n    BOOL  person.degreeMyself\n    BOOL  person.degreeFirst\n    BOOL  person.degreeSecond\n    BOOL  person.degreeThird\n    BOOL  person.degreeOon\n!}\n\n{!#person.pictureUrl}\n    <img src="{person.pictureUrl}">\n{:else}\n    <img src="img/person.png" />\n{/person.pictureUrl!}\n\n<a href="{person.publicProfileUrl}" target="_blank" class="profile-link">\n\n{?person.pictureUrl}\n    <img src="{person.pictureUrl}">\n{:else}\n    <img src="img/person.png" />\n{/person.pictureUrl}\n\n<span class="details">\n\t<span class="name">\n\t\t<span class="person-name-link">{person.firstName} {person.lastName}</span>\n    {person.distanceFirst}\n\t\t{?person.degreeOon}\n\t\t{:else}\n\t\t\t<span class="network-degree">\n\t\t\t{?person.degreeMyself}\n\t\t\t\tYou\n\t\t\t{/person.degreeMyself}\n\t\t\n\t\t\t{?person.degreeFirst}\n\t\t\t\t1st\n\t\t\t{/person.degreeFirst}\n\t\t\n\t\t\t{?person.degreeSecond}\n\t\t\t\t2nd\n\t\t\t{/person.degreeSecond}\n\t\t\n\t\t\t{?person.degreeThird}\n\t\t\t\t3rd\n\t\t\t{/person.degreeThird}\n\t\t\t</span>\n\t\t{/person.degreeOon}\n\n\t</span>\n\n\t<span class="headline">{person.headline}</span>\n\t<span class="location">{person.location.name}</span>\n</span>\n</a>\n<div class="action-bar">\n\t{! TO-DO: based on distance value show connect or not or edit profile!}\n\t{?person.degreeMyself}\n\t\t<a href="http://www.linkedin.com/profile/edit" target="_blank" class="connect-action">Edit Profile</a>\n\t{:else}\n\t\t<a href="{person.publicProfileUrl}" class="connect-action" target="_blank">Connect</a>\n\t{/person.degreeMyself}\n\n\t<span class="options">{! place-holder for shared connections !}</span>\n</div>'}),define("text!templates/BucketBarView.dust",[],function(){return'<ul>\n  {#buckets}\n    <li><a href="#" data-bucket="{json}">{name}{~n} X</a></li>\n  {/buckets}  \n</ul>'}),define("models/peopleSearchResults",["require"],function(a){var b=Backbone.Model.extend({defaults:{facets:[],people:[],peopleCount:0,hasMore:!1,start:0,count:0,total:0},setFacets:function(a){var b={facets:a};this.set(b),this.trigger("change")},setPeople:function(a){var b={people:a};this.set(b),this.trigger("change")},appendPeople:function(a){var b=this.get("people"),c={people:[]};b=b.concat(a),c.people=b,this.set(c),this.trigger("change")}});return new b}),define("text!templates/LoggedInView.dust",[],function(){return'<div id="head-view"></div>\n<div id="bucket-bar-view"></div>\n<div id="facet-list-view"></div>\n<div id="status-view"></div>\n<div id="people-list-view"></div>'}),define("util/log",["require"],function(a){return function(a){console&&"log"in console&&console.log(a)}}),define("util/events",[],function(){function a(){function d(){var b,d;for(var e=0,f=c.length;e<f;e++){b=c[e],d=typeof a[b];if(d!=="undefined")throw Error('Object already contains "'+b+'" property ('+d+")")}}var a=this,b={},c=["fire","on","off"];d(),this.fire=function(c,d){var e,f;if(typeof c=="object"&&typeof c.type!="string")throw Error("Event type not specified");typeof d!="object"&&(d={data:d}),typeof c=="object"&&typeof c.type=="string"?(d=c,c=c.type):d.type=c,e=b[c];if(!e)return!1;f=e.length;while(f--)e[f].call(a,d);return!0},this.on=function(a,c,d){d&&(c=function(){c.apply(d,arguments)});if(typeof a!="string")throw Error("Expected string for event type, found "+typeof a);if(typeof c!="function")throw Error("Expected function, found "+typeof c);return b[a]||(b[a]=[]),b[a].indexOf(c)==-1&&b[a].push(c),c},this.off=function(a,c){var d;if(typeof a!="string")throw Error("Expected string for event type, found "+typeof a);if(typeof c!="function")throw Error("Expected function, found "+typeof c);d=b[a];if(d)for(var e=d.length-1;e>=0;e--)if(d[e]===c)return d.splice(e,1),!0;return!1}}return a}),define("util/channel",["require","util/events"],function(a){var b=a("util/events"),c=function(){function d(a,d,e){var f=c[a];return typeof f=="undefined"&&(c[a]=f=new b),f.on(d,e),this}function e(a,b,d){var e=c[a];return typeof e=="undefined"?this:(e.off(b,d),this)}function f(a,b,d){var e=c[a];return typeof e=="undefined"?this:(e.fire(b,d),this)}var a=this,c={};return{sub:d,unsub:e,pub:f}}();return c}),define("views/HeadView",["require","text!templates/HeadView.dust","models/peopleSearchResults","util/channel"],function(a){var b="HeadView",c=a("text!templates/HeadView.dust"),d=a("models/peopleSearchResults"),e=a("util/channel");return dust.loadSource(dust.compile(c,b)),Backbone.View.extend({tagName:"div",events:{},initialize:function(){_.bindAll(this,"render","unrender","onSearchReturned","onSearchBegin","onUserData"),this.context={firstName:null},e.sub("search","search-returned",this.onSearchReturned),e.sub("search","search-begin",this.onSearchBegin),e.sub("auth","user-data",this.onUserData)},render:function(){var a=$(this.el);return dust.render(b,this.context,function(b,c){a.html(c)}),this},unrender:function(){return $(this.el).remove(),this},onSearchReturned:function(){},onSearchBegin:function(){},onUserData:function(a){this.context.userData=a}})}),define("views/StatusView",["require","text!templates/StatusView.dust","models/peopleSearchResults","util/channel"],function(a){var b="StatusView",c=a("text!templates/StatusView.dust"),d=a("models/peopleSearchResults"),e=a("util/channel");return dust.loadSource(dust.compile(c,b)),Backbone.View.extend({tagName:"div",events:{},initialize:function(){_.bindAll(this,"render","unrender","onSearchReturned","onSearchBegin"),this.context={},e.sub("search","search-returned",this.onSearchReturned),e.sub("search","search-begin",this.onSearchBegin)},render:function(){var a=$(this.el);return dust.render(b,this.context,function(b,c){a.html(c)}),this},unrender:function(){return $(this.el).remove(),this},onSearchReturned:function(){this.context.peopleSearchResults=d.toJSON(),this.context.peopleSearchResults.peopleCount<1e3?this.context.countText=this.context.peopleSearchResults.peopleCount:this.context.countText="more than 1000",this.context.searchInProgress=!1,this.render()},onSearchBegin:function(){this.context.searchInProgress=!0,this.render()}})}),define("views/BucketView",["require","text!templates/BucketView.dust","util/channel"],function(a){var b="BucketView",c=a("text!templates/BucketView.dust"),d=a("util/channel");return dust.loadSource(dust.compile(c,b)),Backbone.View.extend({tagName:"li",events:{},initialize:function(){_.bindAll(this,"render","unrender","update"),this.context={firstName:null}},render:function(){var a=$(this.el);return dust.render(b,this.context,function(b,c){a.html(c)}),this},unrender:function(){return $(this.el).remove(),this},update:function(a){var b=$(".label",this.el),c=$(".count",this.el),d=$(".graph",this.el),e={},f,g;if(!a){$(this.el).removeClass("active");return}e={add:!a.selected,facetCode:a.facetCode,code:a.code,name:a.name},$(this.el).toggleClass("selected",a.selected),d[0]&&(d[0].style.width=Math.min(a.percentage*100,85)+"%"),b.closest("a").attr("data-bucket",JSON.stringify(e)),b.html(a.name),c.html(a.count),$(this.el).addClass("active")}})}),define("views/PeopleCardView",["require","text!templates/PeopleCardView.dust","util/channel"],function(a){var b="PeopleCardView",c=a("text!templates/PeopleCardView.dust"),d=a("util/channel");return dust.loadSource(dust.compile(c,b)),Backbone.View.extend({tagName:"li",events:{},initialize:function(){_.bindAll(this,"render","unrender","update"),this.context={}},render:function(){var a=$(this.el);return dust.render(b,this.context,function(b,c){a.html(c)}),this},unrender:function(){return $(this.el).remove(),this},update:function(a){}})}),define("views/PeopleListView",["require","text!templates/PeopleListView.dust","models/peopleSearchResults","util/channel","views/PeopleCardView"],function(a){var b="PeopleListView",c=a("text!templates/PeopleListView.dust"),d=a("models/peopleSearchResults"),e=a("util/channel"),f=a("views/PeopleCardView");return dust.loadSource(dust.compile(c,b)),Backbone.View.extend({tagName:"div",events:{"click #show-more":"getMorePeopleResults"},initialize:function(){_.bindAll(this,"render","unrender","onSearchReturned","onSearchBegin","dustCb","getMorePeopleResults"),this.context={},this.peopleCardViews=[],e.sub("search","search-returned",this.onSearchReturned),e.sub("search","search-begin",this.onSearchBegin)},render:function(){return dust.render(b,this.context,this.dustCb),this},dustCb:function(a,b){$(this.el).html(b);var c=$("ul",this.el);_.each(this.peopleCardViews,function(a){c.append(a.render().el)})},unrender:function(){return $(this.el).remove(),this},onSearchReturned:function(){var a=d.toJSON(),b=a.people,c=a.hasMore,e,g=$("ul",this.el);this.peopleCardViews=[],g.html(""),_.each(b,function(a){e=new f,e.context.person=a;switch(a.distance){case 0:a.degreeMyself=!0;break;case 1:a.degreeFirst=!0;break;case 2:a.degreeSecond=!0;break;case 3:a.degreeThird=!0;break;default:a.degreeOon=!0}a.firstName.toUpperCase()==="PRIVATE"&&(a.firstName="LinkedIn",a.lastName="Member"),g.append(e.render().el)}),c?$("#show-more",this.el).addClass("active"):$("#show-more",this.el).removeClass("active")},onSearchBegin:function(){},getMorePeopleResults:function(){e.pub("search","get-more-people")}})}),define("models/peopleSearchInput",["require","util/channel"],function(a){var b=a("util/channel"),c=Backbone.Model.extend({defaults:{keywords:null,"first-name":null,"last-name":null,"company-name":null,"current-company":null,title:null,"current-title":null,"school-name":null,"current-school":null,"country-code":null,"postal-code":null,distance:null,start:null,count:null,sort:null,visibility:"full",facets:[],"cohorts-location":[],"cohorts-industry":[],"cohorts-network":[],"cohorts-language":[],"cohorts-current-company":[],"cohorts-past-company":[],"cohorts-school":[]},initialize:function(){_.bindAll(this,"addCohort","onAddBucket","onRemoveBucket"),b.sub("search","add-bucket",this.onAddBucket),b.sub("search","remove-bucket",this.onRemoveBucket)},onAddBucket:function(a){this.addCohort(a.data.facetCode,a.data.code)},onRemoveBucket:function(a){this.removeCohort(a.data.facetCode,a.data.code)},addCohort:function(a,b,c){var d="cohorts-"+a,e=this.get(d),f={};return e&&e.push&&e.indexOf(b)===-1&&(e.push(b),f[d]=e,f.start=0,this.set(f),c||this.trigger("change")),this},removeCohort:function(a,b,c){var d="cohorts-"+a,e=this.get(d),f={},g;return(g=e.indexOf(b))!==-1&&(e.splice(g,1),f[d]=e,f.start=0,this.set(f),c||this.trigger("change")),this},addFacets:function(a,b){var c="facets",d=this.get(c),e={},f=!1;return _.each(a,function(a){d.indexOf(a)===-1&&(d.push(a),f=!0)}),f&&(e[c]=d,this.set(e),b||this.trigger("change")),this},removeFacet:function(a,b){var c="facets",d=this.get(c),e={},f;return(f=d.indexOf(a))!==-1&&(d.splice(f,1),e[c]=d,this.set(e),b||this.trigger("change")),this}});return new c}),define("views/FacetView",["require","text!templates/FacetView.dust","util/channel","views/BucketView","util/log","models/peopleSearchInput"],function(a){var b="FacetView",c=a("text!templates/FacetView.dust"),d=a("util/channel"),e=a("views/BucketView"),f=a("util/log"),g=a("models/peopleSearchInput");return dust.loadSource(dust.compile(c,b)),Backbone.View.extend({tagName:"li",events:{"click li a":"toggleBucket"},initialize:function(){_.bindAll(this,"render","unrender","update","toggleBucket","onAddBucket","onRemoveBucket"),this.context={},this.bucketViews=[],d.sub("search","add-bucket",this.onAddBucket),d.sub("search","remove-bucket",this.onRemoveBucket);for(var a=0;a<10;a++)this.bucketViews.push(new e)},render:function(){var a=$(this.el),c,d=this.bucketViews;return dust.render(b,this.context,function(b,e){a.html(e),c=$("ul",a),_.each(d,function(a){c.append(a.render().el)}),$("a",self.el).click(self.toggleBucket)}),this},unrender:function(){return $(this.el).remove(),this},update:function(a){var b,c,d,e=0,f={location:"Where they live...",industry:"What they do...",network:"Related to you...",language:"Languages they speak...","current-company":"Where they work...","past-company":"Where they used to work...",school:"Where they went to school..."},g=["us:0"];a&&a.buckets&&a.buckets.values?b=a.buckets.values:b=[],$(".name",this.el).html(f[a.code.toLowerCase()]),d=_.max(b,function(a){return a&&a.count&&g.indexOf(a.code)===-1?a.count:0}),d&&d.count?d=d.count:d=0,_.each(this.bucketViews,function(f,h){c=b[h],c&&g.indexOf(c.code)===-1&&e<9&&(c.facetCode=a.code,c.percentage=c.count/d,f.update(c),e++)})},toggleBucket:function(a){f("facet bucket clicked");var b=$(a.target),c=b.closest("a").attr("data-bucket"),e;try{e=JSON.parse(c)}catch(a){f(a)}if(!e)return;e.add?d.pub("search","add-bucket",{data:e}):d.pub("search","remove-bucket",{data:e})},onAddBucket:function(a){},onRemoveBucket:function(a){}})}),define("views/FacetListView",["require","text!templates/FacetListView.dust","models/peopleSearchResults","util/channel","views/FacetView"],function(a){var b="FacetListView",c=a("text!templates/FacetListView.dust"),d=a("models/peopleSearchResults"),e=a("util/channel"),f=a("views/FacetView");return dust.loadSource(dust.compile(c,b)),Backbone.View.extend({tagName:"div",events:{},initialize:function(){_.bindAll(this,"render","unrender","onSearchReturned","onSearchBegin","dustCb"),this.context={firstName:null},this.facetViews=[new f,new f,new f],e.sub("search","search-returned",this.onSearchReturned),e.sub("search","search-begin",this.onSearchBegin)},render:function(){return dust.render(b,this.context,this.dustCb),this},dustCb:function(a,b){$(this.el).html(b);var c=$("ul",this.el);_.each(this.facetViews,function(a){c.append(a.render().el)})},unrender:function(){return $(this.el).remove(),this},onSearchReturned:function(){var a=d.get("facets"),b;_.each(this.facetViews,function(c,d){b=a[d],b&&c.update(b)})},onSearchBegin:function(){}})}),define("views/BucketBarView",["require","text!templates/BucketBarView.dust","models/peopleSearchInput","util/log","util/channel"],function(a){var b="BucketBarView",c=a("text!templates/BucketBarView.dust"),d=a("models/peopleSearchInput"),e=a("util/log"),f=a("util/channel");return dust.loadSource(dust.compile(c,b)),Backbone.View.extend({tagName:"div",events:{"click a":"removeBucket"},initialize:function(){_.bindAll(this,"render","unrender","onSearchReturned","onSearchBegin","onAddBucket","onRemoveBucket","removeBucket"),this.buckets={},this.context={buckets:[]},f.sub("search","add-bucket",this.onAddBucket),f.sub("search","remove-bucket",this.onRemoveBucket),f.sub("search","search-returned",this.onSearchReturned),f.sub("search","search-begin",this.onSearchBegin)},render:function(){var a=$(this.el);return dust.render(b,this.context,function(b,c){a.html(c)}),this},unrender:function(){return $(this.el).remove(),this},onSearchReturned:function(){},onSearchBegin:function(){},onAddBucket:function(a){var b=a.data.facetCode+"-"+a.data.code,c=a.data,d=JSON.stringify(c);e("adding bucket to bucket bar: "+b),c.json=d,this.buckets[b]=c,this.context.buckets=_.toArray(this.buckets),this.render()},onRemoveBucket:function(a){var b=a.data.facetCode+"-"+a.data.code;e("removing bucket from bucket bar: "+b),delete this.buckets[b],this.context.buckets=_.toArray(this.buckets),this.render()},removeBucket:function(a){var b=$(a.target),c=b.attr("data-bucket"),d;try{d=JSON.parse(c)}catch(a){e(a)}if(!d)return;f.pub("search","remove-bucket",{data:d})}})}),define("views/LoggedInView",["require","views/HeadView","views/StatusView","views/FacetListView","views/PeopleListView","views/BucketBarView","models/peopleSearchInput","models/peopleSearchResults","text!templates/LoggedInView.dust","util/channel","util/log"],function(a){var b=a("views/HeadView"),c=a("views/StatusView"),d=a("views/FacetListView"),e=a("views/PeopleListView"),f=a("views/BucketBarView"),g=a("models/peopleSearchInput"),h=a("models/peopleSearchResults"),i=a("text!templates/LoggedInView.dust"),j=a("util/channel"),k=a("util/log"),l="LoggedInView";return dust.loadSource(dust.compile(i,l)),Backbone.View.extend({el:$("#logged-in-view"),events:{},initialize:function(a){_.bindAll(this,"render","unrender","dustCb"),this.views={statusView:new c,headView:new b,facetListView:new d,peopleListView:new e,bucketBarView:new f},this.context={}},render:function(){k("rendering loggedinview"),dust.render(l,this.context,this.dustCb)},dustCb:function(a,b){$(this.el).html(b),$("#head-view",this.el).html(this.views.headView.render().el),$("#facet-list-view",this.el).html(this.views.facetListView.render().el),$("#status-view",this.el).html(this.views.statusView.render().el),$("#people-list-view",this.el).html(this.views.peopleListView.render().el),$("#bucket-bar-view",this.el).html(this.views.bucketBarView.render().el)},unrender:function(){$(this.el).remove()}})}),define("search/peoplesearch",["require","util/channel","models/peopleSearchInput","models/peopleSearchResults"],function(a){function g(){var a=k();b.pub("search","search-begin"),window.IN&&IN.API&&IN.API.Raw&&IN.API.Raw().url(a).method("GET").result(i).error(j)}function h(){var a=d.get("start"),b=d.get("count"),e=d.get("total"),f=d.get("hasMore");if(!f)return;c.set({start:a+b})}function i(a){var c=[],e=[],f=a.people._start,g=a.people._count,h=a.people._total,i=!1;f+g<=h&&(i=!0),d.set({start:f,count:g,total:h,peopleCount:h,hasMore:i}),_.each(a.facets.values,function(a){c.push(a)}),d.setFacets(c),_.each(a.people.values,function(a){e.push(a)}),f===0||!f?d.setPeople(e):d.appendPeople(e),b.pub("search","search-returned")}function j(){b.pub("search","search-returned")}function k(){function b(a,b,d){var e=c.get(b);return typeof e=="object"&&e!==null&&e.length&&e.length>0&&(a+="facet="+d+","+e.join(",")+"&"),a}function d(a,b,d){var d=d||b,e=c.get(b);return typeof e!="undefined"&&e!==null&&(a+=d+"="+e+"&"),a}function e(a,b,d){var d=d||b,e=c.get(b);return typeof e!="undefined"&&e!==null&&(a+=d+"="+Boolean(e).toString()+"&"),a}function g(a,b,d){var d=d||b,e=c.get(b);return typeof e=="object"&&e!==null&&e.length&&e.length>0&&(a+=d+"="+e.join(",")+"&"),a}var a=f;return a=d(a,"keywords"),a=d(a,"first-name"),a=d(a,"last-name"),a=d(a,"company-name"),a=e(a,"current-company"),a=d(a,"title"),a=e(a,"current-title"),a=d(a,"school-name"),a=e(a,"current-school"),a=d(a,"country-code"),a=d(a,"postal-code"),a=d(a,"distance"),a=d(a,"start"),a=d(a,"count"),a=d(a,"sort"),a=d(a,"visibility"),a=g(a,"facets"),a=b(a,"cohorts-location","location"),a=b(a,"cohorts-industry","industry"),a=b(a,"cohorts-network","network"),a=b(a,"cohorts-language","language"),a=b(a,"cohorts-current-company","current-company"),a=b(a,"cohorts-past-company","past-company"),a=b(a,"cohorts-school","school"),a}var b=a("util/channel"),c=a("models/peopleSearchInput"),d=a("models/peopleSearchResults"),e={},f=["/people-search:(","people:(id,first-name,last-name,picture-url,","headline,industry,location,public-profile-url,distance)",",facets:(name,code,buckets:(name,code,count,selected))",")?"].join("");return c.bind("change",g),b.sub("search","get-more-people",h),e}),define("app",["require","views/SignInView","views/LoggedInView","search/peoplesearch","models/peopleSearchInput","util/channel"],function(a){function h(){g["sign-in"]=new b,g["logged-in"]=new c,IN.Event.on(IN,"frameworkLoaded",function(){IN.User.isAuthorized()?i():g["sign-in"].render()}),IN.Event.on(IN,"auth",i)}function i(){var a=window.location.hash.replace("#",""),b=["location","industry","current-company"],c=a.split("&"),d={},h={army:[1223,1226],navy:[1335],airforce:[157235],marines:[2039],coastguard:[4425]},i=[1223,1335,2039,4425,1226,157235,1224,1230,1333,1343,1938783,1400617,1592500,1233200,2061386,462659,1022991,1877670,377572,2010213,1061746];for(var j=0,k=c.length;j<k;j++){var l=c[j].split("=");d[l[0]]=l[1]}d.f&&(b=d.f.split(",")),d.p&&h[d.p]&&(i=h[d.p]),e.addFacets(b,!0),e.set({"cohorts-past-company":i,keywords:"united states",sort:"distance"});var m=["firstName","headline","positions:(company)"];IN.API.Profile("me").fields(m).result(function(a){f.pub("auth","user-data",a.values[0]),g["sign-in"].unrender(),g["logged-in"].render()})}var b=a("views/SignInView"),c=a("views/LoggedInView"),d=a("search/peoplesearch"),e=a("models/peopleSearchInput"),f=a("util/channel"),g={};return{initialize:h}}),require.config({paths:{}}),define("main",["require","app"],function(a){var b=a("app");b.initialize()})