define(function(){function a(){function d(){var b,d;for(var e=0,f=c.length;e<f;e++){b=c[e],d=typeof a[b];if(d!=="undefined")throw Error('Object already contains "'+b+'" property ('+d+")")}}var a=this,b={},c=["fire","on","off"];d(),this.fire=function(c,d){var e,f;if(typeof c=="object"&&typeof c.type!="string")throw Error("Event type not specified");typeof d!="object"&&(d={data:d}),typeof c=="object"&&typeof c.type=="string"?(d=c,c=c.type):d.type=c,e=b[c];if(!e)return!1;f=e.length;while(f--)e[f].call(a,d);return!0},this.on=function(a,c,d){d&&(c=function(){c.apply(d,arguments)});if(typeof a!="string")throw Error("Expected string for event type, found "+typeof a);if(typeof c!="function")throw Error("Expected function, found "+typeof c);return b[a]||(b[a]=[]),b[a].indexOf(c)==-1&&b[a].push(c),c},this.off=function(a,c){var d;if(typeof a!="string")throw Error("Expected string for event type, found "+typeof a);if(typeof c!="function")throw Error("Expected function, found "+typeof c);d=b[a];if(d)for(var e=d.length-1;e>=0;e--)if(d[e]===c)return d.splice(e,1),!0;return!1}}return a})