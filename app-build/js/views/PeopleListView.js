define(function(a){var b="PeopleListView",c=a("text!templates/PeopleListView.dust"),d=a("models/peopleSearchResults"),e=a("util/channel"),f=a("views/PeopleCardView");return dust.loadSource(dust.compile(c,b)),Backbone.View.extend({tagName:"div",events:{"click #show-more":"getMorePeopleResults"},initialize:function(){_.bindAll(this,"render","unrender","onSearchReturned","onSearchBegin","dustCb","getMorePeopleResults"),this.context={},this.peopleCardViews=[],e.sub("search","search-returned",this.onSearchReturned),e.sub("search","search-begin",this.onSearchBegin)},render:function(){return dust.render(b,this.context,this.dustCb),this},dustCb:function(a,b){$(this.el).html(b);var c=$("ul",this.el);_.each(this.peopleCardViews,function(a){c.append(a.render().el)})},unrender:function(){return $(this.el).remove(),this},onSearchReturned:function(){var a=d.toJSON(),b=a.people,c=a.hasMore,e,g=$("ul",this.el);this.peopleCardViews=[],g.html(""),_.each(b,function(a){e=new f,e.context.person=a;switch(a.distance){case 0:a.degreeMyself=!0;break;case 1:a.degreeFirst=!0;break;case 2:a.degreeSecond=!0;break;case 3:a.degreeThird=!0;break;default:a.degreeOon=!0}a.firstName.toUpperCase()==="PRIVATE"&&(a.firstName="LinkedIn",a.lastName="Member"),g.append(e.render().el)}),c?$("#show-more",this.el).addClass("active"):$("#show-more",this.el).removeClass("active")},onSearchBegin:function(){},getMorePeopleResults:function(){e.pub("search","get-more-people")}})})