/*
Inject (c) 2011 Jakob Heuser [https://github.com/jakobo/inject] MIT License
JSON Public Domain
Porthole (c) 2011 Ternary Labs [https://github.com/ternarylabs/porthole] MIT License
Persist (c) 2008 Paul Duncan (paul@pablotron.org) MIT License
*/

(function(){var u,B,c,K,N,O,k,v,P,Q,R,w,o,s,S,D,T,U,V,W,G,X,Y,L,H,x,I,Z,E,F,q,$,aa,ba,ca,da,ea,fa,M,z,A,ga=Array.prototype.slice;v=this;F=!1;A=s=o=null;P=0;H=[];z={};I={};x={};K={};M={};w={};k={fileExpiration:86400};Y=/.*?\.js$/;V=/^https?:\/\//;W=/^(.*?)(\/.*|$)/;$=/.*?require[\s]*\([\s]*("|')([\w\\/\.\:]+?)('|")[\s]*\).*?/gm;aa=/^(.+?)[\s](.+?)[\s](.+?)[\s]([\w\W]+)$/m;fa=function(a){return z=a};D=function(a){return I[a]||!1};ca=function(a,b){return I[a]?void 0:I[a]=b};X=function(a){var b;if(((b=
o[a])!=null?b.expires:void 0)>(new Date).getTime())return!1;o[a]!=null&&(o[a]={});return!0};G=function(a){return o!=null&&o[a]!=null&&o[a].content&&!X(a)};S=function(a,b){s||(s=new B.Store("Inject FileStorage"));return o?G(a)?b(!0,o[a].content):b(!1,null):s.get("FILEDB1",function(d,f){return d&&typeof f==="string"&&f.length?(o=u.parse(f),G(a)?b(!0,o[a].content):b(!1,null)):(o={},b(!1,null))})};ba=function(a,b){s||(s=new B.Store("Inject FileStorage"));if(!G(a))return o[a]={content:b,expires:k.fileExpiration*
1E3+(new Date).getTime()},s.set("FILEDB1",u.stringify(o))};O=function(a){var b;a==null&&(a=1);b="FILEDB"+a;s||(s=new B.Store("Inject FileStorage"));s.set(b,"");if(a===1)return o={}};R=function(){return"txn_"+P++};Q=function(){var a,b,d,f,e;d=k!=null?(b=k.xd)!=null?b.xhr:void 0:void 0;b=k!=null?(e=k.xd)!=null?e.inject:void 0:void 0;if(!d)throw Error("Configuration requires xd.remote to be defined");if(!b)throw Error("Configuration requires xd.local to be defined");f=function(a){return a=a.replace(V,
"").replace(W,"$1")};try{a=document.createElement('<iframe name="injectProxy"/>')}catch(j){a=document.createElement("iframe")}a.name="injectProxy";a.src=d+"#xhr";a.style.width=a.style.height="1px";a.style.right=a.style.bottom="0px";a.style.position="absolute";a.id="injectProxy";document.body.insertBefore(a,document.body.firstChild);A=new c.WindowProxy(k.xd.xhr+"#xhr","injectProxy");return A.addEventListener(function(a){var h,b;if(f(a.origin)===f(k.xd.xhr))if(a.data==="READY"){A.postMessage("READYREADY");
F=!1;for(h=0,b=H.length;h<b;h++)a=H[h],a()}else return a=a.data.match(aa),E(a[1],a[2],a[3],a[4])})};T=function(a){var b,d;d=function(){};d={before:d,after:d};if(!z[a])return d;a=z[a];for(b in d)a[b]&&(d[b]=a[b]);return d};Z=function(a){var b,d,f,e;e=a;b=k.path||"";if(x[a])return x[a];if(z[a]&&(d=z[a],typeof d==="string"&&(e=d),typeof d==="object"&&d.path&&(typeof d.path==="function"&&(f=d.path(e),f!==!1&&(e=f)),typeof d.path==="string")))e=d.path;typeof b==="function"&&(f=b(e),f!==!1&&(e=f));if(e.indexOf("http")===
0||e.indexOf("https")===0)return x[a]=e,x[a];if(e.indexOf("/")!==0&&typeof b==="undefined")throw Error("Path must be defined");e.indexOf("/")!==0&&typeof b==="string"&&(e=""+k.path+e);Y.test(e)||(e=""+e+".js");x[a]=e;return x[a]};L=function(a,b){var d,f,e,c,g,h;c=R();e={};for(g=0,h=a.length;g<h;g++)d=a[g],e[d]=Z(d);M[c]=a;K[c]=b;g=[];for(d in e)f=e[d],w[f]||(w[f]={txns:[],loading:!1}),D(d)&&(e[d]=D(d)),g.push(S(f,function(a,g){w[f].txns.push(c);if(a&&typeof g==="string"&&g.length)return E(c,d,f,g);
else if(!w[f].loading)return w[f].loading=!0,k.xd!=null?da(c,d,f,E):ea(c,d,f,E)}));return g};E=function(a,b,d,f){var e,c,g,h,n,p;c=T(b);a={};for(e in c)g=c[e],a[e]=g.toString().match(/.*?\{([\w\W]*)\}/m)[1];e='with (window) {\n  (function() {\n    var module = {}, exports = {}, require = __INJECT_NS__.require, exe = null;\n    module.id = "__MODULE_ID__";\n    module.uri = "__MODULE_URI__";\n    module.exports = exports;\n    exe = function(module, exports, require) {\n      __POINTCUT_BEFORE__'.replace(/__MODULE_ID__/g,
b).replace(/__MODULE_URI__/g,d).replace(/__INJECT_NS__/g,"Inject").replace(/__POINTCUT_BEFORE__/g,a.before);a="    __POINTCUT_AFTER__\n  };\n  exe.call(module, module, exports, require);\n  return module.exports;\n})();\n}".replace(/__POINTCUT_AFTER__/g,a.after);n=""+e+"\n"+f+"\n"+a;h=[];f.replace($,function(){var a;a=1<=arguments.length?ga.call(arguments,0):[];return h.push(a[2])});p=function(){var a,g,h,p,e;try{a=v.eval(n)}catch(c){throw c;}ca(b,a);ba(d,f);w[d].loading=!1;p=w[d].txns;e=[];for(g=
0,h=p.length;g<h;g++)a=p[g],e.push(N(a));return e};return h.length>0?L(h,function(){return p()}):p()};N=function(a){var b,d,f,e,c,g;d=!0;b=K[a];e=[];g=M[a];for(a=0,c=g.length;a<c;a++)if(f=g[a],f=D(f),f===!1?d=!1:e.push(f),!d)break;if(d)return b.call(v,e)};ea=function(a,b,d,f){var e;e=U();e.open("GET",d);e.onreadystatechange=function(){if(e.readyState===4&&e.status===200)return f.call(v,a,b,d,e.responseText)};return e.send(null)};da=function(a,b,d){return A.postMessage(""+a+" "+b+" "+d)};U=function(){var a;
a=!1;if(typeof XMLHttpRequest!=="undefined")try{a=new XMLHttpRequest}catch(b){a=!1}if(!a&&typeof window.createRequest!=="undefined")try{a=new window.createRequest}catch(d){a=!1}if(!a)try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(f){try{a=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){a=!1}}if(!a)throw Error("Could not create an xmlHttpRequest Object");return a};q=function(a){var b;b=D(a);if(b===!1)throw Error(""+a+" not loaded");return b};q.ensure=function(a,b){var d;k.xd!=null&&!A&&!F&&(Q(),F=
!0);d=function(){return L(a,function(){var a,d;d={};a={};d.exports=a;return b.call(v,q,d,a)})};return F?H.push(d):d()};q.setModuleRoot=function(a){typeof a==="string"&&a.lastIndexOf("/")!==a.length&&(a=""+a+"/");return k.path=a};q.setExpires=function(a){return k.fileExpiration=a};q.setCrossDomain=function(a,b){k.xd={};k.xd.inject=a;return k.xd.xhr=b};q.clearCache=function(a){return O(a)};q.manifest=function(a){return fa(a)};q.run=function(){return"bar"};v.require=q;v.Inject={require:q};c=null;c=typeof c==
"undefined"||!c?{}:c;c={trace:function(){},error:function(a){try{console.error("Porthole: "+a)}catch(b){}},WindowProxy:function(){}};c.WindowProxy.prototype={postMessage:function(){},addEventListener:function(){},removeEventListener:function(){}};c.WindowProxyLegacy=function(a,b){b===void 0&&(b="");this.targetWindowName=b;this.eventListeners=[];this.origin=window.location.protocol+"//"+window.location.host;a!==null?(this.proxyIFrameName=this.targetWindowName+"ProxyIFrame",this.proxyIFrameLocation=
a,this.proxyIFrameElement=this.createIFrameProxy()):this.proxyIFrameElement=null};c.WindowProxyLegacy.prototype={getTargetWindowName:function(){return this.targetWindowName},getOrigin:function(){return this.origin},createIFrameProxy:function(){var a=document.createElement("iframe");a.setAttribute("id",this.proxyIFrameName);a.setAttribute("name",this.proxyIFrameName);a.setAttribute("src",this.proxyIFrameLocation);a.setAttribute("frameBorder","1");a.setAttribute("scrolling","auto");a.setAttribute("width",
30);a.setAttribute("height",30);a.setAttribute("style","position: absolute; left: -100px; top:0px;");a.style.setAttribute&&a.style.setAttribute("cssText","position: absolute; left: -100px; top:0px;");document.body.appendChild(a);return a},postMessage:function(a,b){b===void 0&&(b="*");this.proxyIFrameElement===null?c.error("Can't send message because no proxy url was passed in the constructor"):(sourceWindowName=window.name,this.proxyIFrameElement.setAttribute("src",this.proxyIFrameLocation+"#"+a+
"&sourceOrigin="+escape(this.getOrigin())+"&targetOrigin="+escape(b)+"&sourceWindowName="+sourceWindowName+"&targetWindowName="+this.targetWindowName),this.proxyIFrameElement.height=this.proxyIFrameElement.height>50?50:100)},addEventListener:function(a){this.eventListeners.push(a);return a},removeEventListener:function(a){try{this.eventListeners.splice(this.eventListeners.indexOf(a),1)}catch(b){this.eventListeners=[],c.error(b)}},dispatchEvent:function(a){for(var b=0;b<this.eventListeners.length;b++)try{this.eventListeners[b](a)}catch(d){c.error("Exception trying to call back listener: "+
d)}}};c.WindowProxyHTML5=function(a,b){b===void 0&&(b="");this.targetWindowName=b};c.WindowProxyHTML5.prototype={postMessage:function(a,b){b===void 0&&(b="*");targetWindow=this.targetWindowName===""?top:parent.frames[this.targetWindowName];targetWindow.postMessage(a,b)},addEventListener:function(a){window.addEventListener("message",a,!1);return a},removeEventListener:function(a){window.removeEventListener("message",a,!1)},dispatchEvent:function(a){var b=document.createEvent("MessageEvent");b.initMessageEvent("message",
!0,!0,a.data,a.origin,1,window,null);window.dispatchEvent(b)}};typeof window.postMessage!="function"?(c.trace("Using legacy browser support"),c.WindowProxy=c.WindowProxyLegacy,c.WindowProxy.prototype=c.WindowProxyLegacy.prototype):(c.trace("Using built-in browser support"),c.WindowProxy=c.WindowProxyHTML5,c.WindowProxy.prototype=c.WindowProxyHTML5.prototype);c.WindowProxy.splitMessageParameters=function(a){if(typeof a=="undefined"||a===null)return null;var b=[],a=a.split(/&/),d;for(d in a){var c=
a[d].split("=");b[c[0]]=typeof c[1]=="undefined"?"":c[1]}return b};c.MessageEvent=function(a,b,d){this.data=a;this.origin=b;this.source=d};c.WindowProxyDispatcher={forwardMessageEvent:function(a){a=document.location.hash;if(a.length>0){a=a.substr(1);m=c.WindowProxyDispatcher.parseMessage(a);targetWindow=m.targetWindowName===""?top:parent.frames[m.targetWindowName];var b=c.WindowProxyDispatcher.findWindowProxyObjectInWindow(targetWindow,m.sourceWindowName);b?b.origin==m.targetOrigin||m.targetOrigin==
"*"?(a=new c.MessageEvent(m.data,m.sourceOrigin,b),b.dispatchEvent(a)):c.error("Target origin "+b.origin+" does not match desired target of "+m.targetOrigin):c.error("Could not find window proxy object on the target window")}},parseMessage:function(a){if(typeof a=="undefined"||a===null)return null;params=c.WindowProxy.splitMessageParameters(a);var b={targetOrigin:"",sourceOrigin:"",sourceWindowName:"",data:""};b.targetOrigin=unescape(params.targetOrigin);b.sourceOrigin=unescape(params.sourceOrigin);
b.sourceWindowName=unescape(params.sourceWindowName);b.targetWindowName=unescape(params.targetWindowName);a=a.split(/&/);if(a.length>3)a.pop(),a.pop(),a.pop(),a.pop(),b.data=a.join("&");return b},findWindowProxyObjectInWindow:function(a,b){a.RuntimeObject&&(a=a.RuntimeObject());if(a)for(var d in a)try{if(a[d]!==null&&typeof a[d]=="object"&&a[d]instanceof a.Porthole.WindowProxy&&a[d].getTargetWindowName()==b)return a[d]}catch(c){}return null},start:function(){window.addEventListener?window.addEventListener("resize",
c.WindowProxyDispatcher.forwardMessageEvent,!1):document.body.attachEvent?window.attachEvent("onresize",c.WindowProxyDispatcher.forwardMessageEvent):c.error("Can't attach resize event")}};(u=v.JSON||null)||(u={});(function(){function a(a){return a<10?"0"+a:a}function b(a){e.lastIndex=0;return e.test(a)?'"'+a.replace(e,function(a){var g=h[a];return typeof g==="string"?g:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function d(a,h){var c,y,e,f,J=j,t,l=h[a];l&&typeof l==="object"&&
typeof l.toJSON==="function"&&(l=l.toJSON(a));typeof n==="function"&&(l=n.call(h,a,l));switch(typeof l){case "string":return b(l);case "number":return isFinite(l)?String(l):"null";case "boolean":case "null":return String(l);case "object":if(!l)return"null";j+=g;t=[];if(Object.prototype.toString.apply(l)==="[object Array]"){f=l.length;for(c=0;c<f;c+=1)t[c]=d(c,l)||"null";e=t.length===0?"[]":j?"[\n"+j+t.join(",\n"+j)+"\n"+J+"]":"["+t.join(",")+"]";j=J;return e}if(n&&typeof n==="object"){f=n.length;
for(c=0;c<f;c+=1)typeof n[c]==="string"&&(y=n[c],(e=d(y,l))&&t.push(b(y)+(j?": ":":")+e))}else for(y in l)Object.prototype.hasOwnProperty.call(l,y)&&(e=d(y,l))&&t.push(b(y)+(j?": ":":")+e);e=t.length===0?"{}":j?"{\n"+j+t.join(",\n"+j)+"\n"+J+"}":"{"+t.join(",")+"}";j=J;return e}}if(typeof Date.prototype.toJSON!=="function")Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+
":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()};var c=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,j,g,h={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},n;if(typeof u.stringify!==
"function")u.stringify=function(a,h,b){var c;g=j="";if(typeof b==="number")for(c=0;c<b;c+=1)g+=" ";else typeof b==="string"&&(g=b);if((n=h)&&typeof h!=="function"&&(typeof h!=="object"||typeof h.length!=="number"))throw Error("JSON.stringify");return d("",{"":a})};if(typeof u.parse!=="function")u.parse=function(a,g){function h(a,b){var d,n,c=a[b];if(c&&typeof c==="object")for(d in c)Object.prototype.hasOwnProperty.call(c,d)&&(n=h(c,d),n!==void 0?c[d]=n:delete c[d]);return g.call(a,b,c)}var b,a=String(a);
c.lastIndex=0;c.test(a)&&(a=a.replace(c,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return b=eval("("+a+")"),typeof g==="function"?h({"":b},""):b;throw new SyntaxError("JSON.parse");}})();B=null;B=function(){var a,b,d,c,e,j;j=function(){var a=["expires","path","domain"],h=escape,
b=unescape,d=document,c,e=function(b,d){var c,n,e,p=[],f=arguments.length>2?arguments[2]:{};p.push(h(b)+"="+h(d));for(c=0;c<a.length;c++)n=a[c],(e=f[n])&&p.push(n+"="+e);f.secure&&p.push("secure");return p.join("; ")};c={set:function(a,g){var b=arguments.length>2?arguments[2]:{},h=new Date;h.setTime(h.getTime());var c={};if(b.expires)b.expires*=864E5,c.expires=new Date(h.getTime()+b.expires),c.expires=c.expires.toGMTString();h=["path","domain","secure"];for(i=0;i<h.length;i++)b[h[i]]&&(c[h[i]]=b[h[i]]);
b=e(a,g,c);d.cookie=b;return g},has:function(a){var a=h(a),g=d.cookie,b=g.indexOf(a+"="),g=g.substring(0,a.length);return!b&&a!=g||b<0?!1:!0},get:function(a){var a=h(a),g=d.cookie,c=g.indexOf(a+"="),e=c+a.length+1,f=g.substring(0,a.length);if(!c&&a!=f||c<0)return null;a=g.indexOf(";",e);if(a<0)a=g.length;return b(g.substring(e,a))},remove:function(a){var g=c.get(a);d.cookie=e(a,"",{expires:"Thu, 01-Jan-1970 00:00:01 GMT"});return g},keys:function(){var a=d.cookie.split("; "),g,h,c=[];for(g=0;g<a.length;g++)h=
a[g].split("="),c.push(b(h[0]));return c},all:function(){var a=d.cookie.split("; "),g,h,c=[];for(g=0;g<a.length;g++)h=a[g].split("="),c.push([b(h[0]),b(h[1])]);return c},version:"0.2.1",enabled:!1};c.enabled=function(){var a=new Date,a=a.toGMTString();this.set("__EC_TEST__",a);return this.enabled=this.remove("__EC_TEST__")==a}.call(c);return c}();e=function(){};d=function(a){return"PS"+a.replace(/_/g,"__").replace(/ /g,"_s")};C={search_order:"gears,localstorage,whatwg_db,globalstorage,flash,ie,cookie".split(","),
name_re:/^[a-z][a-z0-9_ -]+$/i,methods:"init,get,set,remove,load,save".split(","),sql:{version:"1",create:"CREATE TABLE IF NOT EXISTS persist_data (k TEXT UNIQUE NOT NULL PRIMARY KEY, v TEXT NOT NULL)",get:"SELECT v FROM persist_data WHERE k = ?",set:"INSERT INTO persist_data(k, v) VALUES (?, ?)",remove:"DELETE FROM persist_data WHERE k = ?"},flash:{div_id:"_persist_flash_wrap",id:"_persist_flash",path:"persist.swf",size:{w:1,h:1},args:{autostart:!0}}};b={gears:{size:-1,test:function(){return window.google&&
window.google.gears?!0:!1},methods:{transaction:function(a){var h=this.db;h.execute("BEGIN").close();a.call(this,h);h.execute("COMMIT").close()},init:function(){var a;a=this.db=google.gears.factory.create("beta.database");a.open(d(this.name));a.execute(C.sql.create).close()},get:function(a,h,b){var c,d=C.sql.get;h&&this.transaction(function(e){c=e.execute(d,[a]);c.isValidRow()?h.call(b||this,!0,c.field(0)):h.call(b||this,!1,null);c.close()})},set:function(a,b,c,d){var e=C.sql.remove,f=C.sql.set;this.transaction(function(j){j.execute(e,
[a]).close();j.execute(f,[a,b]).close();c&&c.call(d||this,!0,b)})},remove:function(a,b,c){var d=C.sql.get;sql=C.sql.remove;this.transaction(function(e){b?(r=e.execute(d,[a]),r.isValidRow()?(val=r.field(0),e.execute(sql,[a]).close(),b.call(c||this,!0,val)):b.call(c||this,!1,null),r.close()):e.execute(sql,[a]).close()})}}},whatwg_db:{size:204800,test:function(){return!window.openDatabase?!1:!window.openDatabase("PersistJS Test",C.sql.version,"Persistent database test.",b.whatwg_db.size)?!1:!0},methods:{transaction:function(a){if(!this.db_created){var b=
C.sql.create;this.db.transaction(function(a){a.executeSql(b,[],function(){this.db_created=!0})},e)}this.db.transaction(a)},init:function(){this.db=openDatabase(this.name,C.sql.version,this.o.about||"Persistent storage for "+this.name,this.o.size||b.whatwg_db.size)},get:function(a,b,c){var d=C.sql.get;b&&(c=c||this,this.transaction(function(e){e.executeSql(d,[a],function(a,g){g.rows.length>0?b.call(c,!0,g.rows.item(0).v):b.call(c,!1,null)})}))},set:function(a,b,c,d){var e=C.sql.remove,f=C.sql.set;
this.transaction(function(j){j.executeSql(e,[a],function(){j.executeSql(f,[a,b],function(){c&&c.call(d||this,!0,b)})})});return b},remove:function(a,b,c){var d=C.sql.get;sql=C.sql.remove;this.transaction(function(e){b?e.executeSql(d,[a],function(d,e){if(e.rows.length>0){var f=e.rows.item(0).v;d.executeSql(sql,[a],function(){b.call(c||this,!0,f)})}else b.call(c||this,!1,null)}):e.executeSql(sql,[a])})}}},globalstorage:{size:5242880,test:function(){return window.globalStorage?!0:!1},methods:{key:function(a){return d(this.name)+
d(a)},init:function(){this.store=globalStorage[this.o.domain]},get:function(a,b,c){a=this.key(a);b&&b.call(c||this,!0,this.store.getItem(a))},set:function(a,b,c,d){a=this.key(a);this.store.setItem(a,b);c&&c.call(d||this,!0,b)},remove:function(a,b,c){var d,a=this.key(a);d=this.store[a];this.store.removeItem(a);b&&b.call(c||this,d!==null,d)}}},localstorage:{size:-1,test:function(){return window.localStorage?!0:!1},methods:{key:function(a){return d(this.name)+d(a)},init:function(){this.store=localStorage},
get:function(a,b,c){a=this.key(a);b&&b.call(c||this,!0,this.store.getItem(a))},set:function(a,b,c,d){a=this.key(a);this.store.setItem(a,b);c&&c.call(d||this,!0,b)},remove:function(a,b,c){var d,a=this.key(a);d=this.getItem(a);this.store.removeItem(a);b&&b.call(c||this,d!==null,d)}}},ie:{prefix:"_persist_data-",size:65536,test:function(){return window.ActiveXObject?!0:!1},make_userdata:function(a){var b=document.createElement("div");b.id=a;b.style.display="none";b.addBehavior("#default#userData");document.body.appendChild(b);
return b},methods:{init:function(){var a=b.ie.prefix+d(this.name);this.el=b.ie.make_userdata(a);this.o.defer&&this.load()},get:function(a,b,c){a=d(a);this.o.defer||this.load();a=this.el.getAttribute(a);b&&b.call(c||this,a?!0:!1,a)},set:function(a,b,c,e){a=d(a);this.el.setAttribute(a,b);this.o.defer||this.save();c&&c.call(e||this,!0,b)},load:function(){this.el.load(d(this.name))},save:function(){this.el.save(d(this.name))}}},cookie:{delim:":",size:4E3,test:function(){return a.Cookie.enabled?!0:!1},
methods:{key:function(a){return this.name+b.cookie.delim+a},get:function(a,b,c,d){a=this.key(a);b=j.get(a);c&&c.call(d||this,b!=null,b)},set:function(a,b,c,d){a=this.key(a);j.set(a,b,this.o);c&&c.call(d||this,!0,b)},remove:function(a,b,c,d){a=this.key(a);b=j.remove(a);c&&c.call(d||this,b!=null,b)}}},flash:{test:function(){return!window.SWFObject||!deconcept||!deconcept.SWFObjectUtil?!1:deconcept.SWFObjectUtil.getPlayerVersion().major>=8?!0:!1},methods:{init:function(){if(!b.flash.el){var a,c,d,e=
C.flash;d=document.createElement("div");d.id=e.div_id;document.body.appendChild(d);a=new SWFObject(this.o.swf_path||e.path,e.id,e.size.w,e.size.h,"8");for(c in e.args)a.addVariable(c,e.args[c]);a.write(d);b.flash.el=document.getElementById(e.id)}this.el=b.flash.el},get:function(a,b,c){a=d(a);a=this.el.get(this.name,a);b&&b.call(c||this,a!==null,a)},set:function(a,b,c,e){a=d(a);this.el.set(this.name,a,b);c&&c.call(e||this,!0,b)},remove:function(a,b,c){a=d(a);a=this.el.remove(this.name,a);b&&b.call(c||
this,!0,a)}}}};c=function(){var c,d,f,j;f=C.methods;var k=C.search_order;for(c=0,d=f.length;c<d;c++)a.Store.prototype[f[c]]=e;a.type=null;a.size=-1;for(c=0,d=k.length;!a.type&&c<d;c++)if(f=b[k[c]],f.test())for(j in a.type=k[c],a.size=f.size,f.methods)a.Store.prototype[j]=f.methods[j];a._init=!0};a={VERSION:"0.1.0",type:null,size:0,add:function(a){b[a.id]=a;C.search_order=[a.id].concat(C.search_order);c()},remove:function(a){var d=C.search_order.indexOf(a);d<0||(C.search_order.splice(d,1),delete b[a],
c())},Cookie:j,Store:function(b,c){if(!C.name_re.exec(b))throw Error("Invalid name");if(!a.type)throw Error("No suitable storage found");c=c||{};this.name=b;c.domain=c.domain||location.hostname||"localhost.localdomain";this.o=c;c.expires=c.expires||730;c.path=c.path||"/";this.init()}};c();return a}()}).call(this);
